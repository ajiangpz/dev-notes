{
  "title": "使用 Canvas 绘制图片并添加对比色文本",
  "date": "2016-03-08T00:00:00.000Z",
  "tags": [
    "markdown",
    "code",
    "features"
  ],
  "draft": false,
  "summary": "Example of a markdown file with code blocks and syntax highlighting",
  "body": {
    "raw": "### 在 React 中使用 Canvas 绘制图片并添加对比色文本\n\n在这篇博客中，我们将学习如何在 React 中使用 Canvas 绘制图片、处理图片数据，并根据图片的顶部颜色生成对比色，以便在图片顶部添加清晰易读的文字。这个项目适合对前端图形处理和 Canvas 有兴趣的开发者，特别是那些需要在项目中应用图像处理和文字叠加的场景。\n\n### 需求分析\n\n我们希望实现以下几个功能：\n\n1.  **加载和绘制图片**：在 Canvas 中加载一张图片并将其绘制出来。\n2.  **获取图片顶部的平均颜色**：提取图片顶部区域的颜色数据，计算平均颜色值。\n3.  **生成对比色**：根据顶部颜色生成一个对比色（黑色或白色），使其与顶部颜色形成明显对比。\n4.  **绘制文字**：在图片顶部使用对比色绘制一段文字，以确保文字清晰可读。\n\n### 技术点\n\n*   **Canvas API**：用于图像绘制和图像数据处理。\n*   **React Hooks**：使用 `useRef` 和 `useEffect` 管理 Canvas 和异步操作。\n*   **对比色计算**：通过亮度计算来确定文本的最佳对比色。\n\n### 实现步骤\n\n#### 1. 创建项目结构\n\n在 React 项目中创建一个新的组件文件 `Page.tsx`，并定义基本结构：\n\n```typescript\n\"use client\";\nimport React, { useEffect, useRef } from \"react\";\n```\n\n#### 2. 加载图片并绘制到 Canvas\n\n我们先定义一个 `loadImage` 函数，用于从 URL 加载图片并返回 `HTMLImageElement`。在图片加载完成后，我们可以使用 `canvas.getContext(\"2d\").drawImage()` 将图片绘制到 Canvas 上：\n\n```typescript\nfunction loadImage(url: string) {\n    return new Promise<HTMLImageElement>((resolve, reject) => {\n        const img = new Image();\n        img.crossOrigin = \"anonymous\";\n        img.onload = () => resolve(img);\n        img.onerror = reject;\n        img.src = url;\n    });\n}\n```\n\n#### 3. 获取图片顶部的平均颜色\n\n接下来，我们提取图片顶部的颜色数据，并计算其平均颜色。我们可以取图片顶部 10% 的高度作为样本区域：\n\n```typescript\nfunction getTopColor(imageData: ImageData) {\n    const { data, width, height } = imageData;\n    const topHeight = Math.floor(height * 0.1);\n\n    let rTotal = 0, gTotal = 0, bTotal = 0, pixelCount = 0;\n\n    for (let y = 0; y < topHeight; y++) {\n        for (let x = 0; x < width; x++) {\n            const index = (y * width + x) * 4;\n            rTotal += data[index];\n            gTotal += data[index + 1];\n            bTotal += data[index + 2];\n            pixelCount++;\n        }\n    }\n\n    const rAvg = rTotal / pixelCount;\n    const gAvg = gTotal / pixelCount;\n    const bAvg = bTotal / pixelCount;\n\n    return { r: Math.round(rAvg), g: Math.round(gAvg), b: Math.round(bAvg) };\n}\n```\n\n#### 4. 根据顶部颜色生成对比色\n\n为了确保文字在图片上具有清晰的对比度，我们可以根据顶部颜色的亮度来选择对比色。亮度公式如下：\n\n\\[\n\\text{亮度} = 0.299 \\times R + 0.587 \\times G + 0.114 \\times B\n]\n\n如果亮度较高，则使用黑色作为对比色；如果亮度较低，则使用白色。代码如下：\n\n```typescript\nfunction getContrastColor({ r, g, b }: { r: number; g: number; b: number }) {\n    const brightness = 0.299 * r + 0.587 * g + 0.114 * b;\n    return brightness > 128 ? 'black' : 'white';\n}\n```\n\n#### 5. 使用对比色绘制文本\n\n现在我们可以将文字绘制到 Canvas 的顶部区域，并使用对比色确保文字清晰可见。\n\n```typescript\nexport default function Page() {\n    const canvasRef = useRef<HTMLCanvasElement>(null);\n\n    useEffect(() => {\n        (async function () {\n            const canvas = canvasRef.current;\n            if (!canvas) return;\n\n            const context = canvas.getContext(\"2d\");\n            const img = await loadImage(\"https://plus.unsplash.com/premium_photo-1664474619075-644dd191935f?w=800&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MXx8aW1hZ2V8ZW58MHx8MHx8fDA%3D\");\n\n            canvas.width = img.width;\n            canvas.height = img.height;\n\n            const imageData = context?.getImageData(0, 0, img.width, img.height);\n            if (!imageData) return;\n\n            const topColor = getTopColor(imageData);\n            const contrastColor = getContrastColor(topColor);\n\n            context.putImageData(imageData, 0, 0);\n\n            // 设置文本样式并绘制到顶部\n            context.font = \"24px Arial\";\n            context.fillStyle = contrastColor;\n            context.textAlign = \"center\";\n            context.fillText(\"Sample Text at Top\", canvas.width / 2, 30);\n        })();\n    }, []);\n\n    return (\n        <div>\n            <canvas id=\"canvas\" ref={canvasRef}></canvas>\n        </div>\n    );\n}\n```\n\n### 6. 整体效果展示\n\n在以上代码中，我们已经将图片绘制到 Canvas，并在图片顶部添加了一段带有对比色的文字。\n\n![image.png](https://p0-xtjj-private.juejin.cn/tos-cn-i-73owjymdk6/04f3dbca16604743851f746364d2ad1e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgcHp6eg==:q75.awebp?policy=eyJ2bSI6MywidWlkIjoiMTM4MDY0MjMzNjAyNjgxMyJ9&rk3s=f64ab15b&x-orig-authkey=f32326d3454f2ac7e96d3d06cdbb035152127018&x-orig-expires=1734227728&x-orig-sign=9kaHDN838ZNoC4m8ZMsnsiRj8mI%3D)\n\n![image.png](https://p0-xtjj-private.juejin.cn/tos-cn-i-73owjymdk6/1a302f1a77304c6e93b317e31a2c2b2d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgcHp6eg==:q75.awebp?policy=eyJ2bSI6MywidWlkIjoiMTM4MDY0MjMzNjAyNjgxMyJ9&rk3s=f64ab15b&x-orig-authkey=f32326d3454f2ac7e96d3d06cdbb035152127018&x-orig-expires=1734227728&x-orig-sign=8NuyTjfJMUAS%2FYCNDzBAGMG4%2Frw%3D)\n\n### 总结\n\n在这篇博客中，我们展示了如何在 React 中使用 Canvas 来加载和处理图像，并根据图像顶部颜色生成对比色用于文本显示。通过这种方式，我们可以在图片上生成清晰的文字效果，使文字与背景形成良好对比。这种技术适用于各种图像叠加应用场景，尤其是在创建水印或提示文字时。\n\n通过使用 Canvas 的 `getImageData` 和 `putImageData`，我们不仅能够处理图像的颜色和亮度，还可以实现更丰富的图像处理效果。这种方法为前端图像处理提供了一个强大的工具，让我们能够在应用中呈现更多的视觉效果。\n",
    "code": "var Component=(()=>{var h=Object.create;var l=Object.defineProperty;var m=Object.getOwnPropertyDescriptor;var u=Object.getOwnPropertyNames;var N=Object.getPrototypeOf,k=Object.prototype.hasOwnProperty;var g=(e,a)=>()=>(a||e((a={exports:{}}).exports,a),a.exports),w=(e,a)=>{for(var s in a)l(e,s,{get:a[s],enumerable:!0})},o=(e,a,s,t)=>{if(a&&typeof a==\"object\"||typeof a==\"function\")for(let c of u(a))!k.call(e,c)&&c!==s&&l(e,c,{get:()=>a[c],enumerable:!(t=m(a,c))||t.enumerable});return e};var f=(e,a,s)=>(s=e!=null?h(N(e)):{},o(a||!e||!e.__esModule?l(s,\"default\",{value:e,enumerable:!0}):s,e)),x=e=>o(l({},\"__esModule\",{value:!0}),e);var r=g((M,i)=>{i.exports=_jsx_runtime});var y={};w(y,{default:()=>d,frontmatter:()=>v});var n=f(r()),v={title:\"\\u4F7F\\u7528 Canvas \\u7ED8\\u5236\\u56FE\\u7247\\u5E76\\u6DFB\\u52A0\\u5BF9\\u6BD4\\u8272\\u6587\\u672C\",date:\"2016-03-08\",tags:[\"markdown\",\"code\",\"features\"],draft:!1,summary:\"Example of a markdown file with code blocks and syntax highlighting\"};function p(e){let a={a:\"a\",code:\"code\",h3:\"h3\",h4:\"h4\",img:\"img\",li:\"li\",ol:\"ol\",p:\"p\",path:\"path\",pre:\"pre\",span:\"span\",strong:\"strong\",svg:\"svg\",ul:\"ul\",...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(a.h3,{className:\"content-header\",id:\"\\u5728-react-\\u4E2D\\u4F7F\\u7528-canvas-\\u7ED8\\u5236\\u56FE\\u7247\\u5E76\\u6DFB\\u52A0\\u5BF9\\u6BD4\\u8272\\u6587\\u672C\",children:[(0,n.jsx)(a.a,{\"aria-hidden\":\"true\",href:\"#\\u5728-react-\\u4E2D\\u4F7F\\u7528-canvas-\\u7ED8\\u5236\\u56FE\\u7247\\u5E76\\u6DFB\\u52A0\\u5BF9\\u6BD4\\u8272\\u6587\\u672C\",tabIndex:\"-1\",children:(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(a.span,{className:\"content-header-link\",children:(0,n.jsxs)(a.svg,{className:\"h-5 linkicon w-5\",fill:\"currentColor\",viewBox:\"0 0 20 20\",xmlns:\"http://www.w3.org/2000/svg\",children:[(0,n.jsx)(a.path,{d:\"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z\"}),(0,n.jsx)(a.path,{d:\"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z\"})]})})})}),\"\\u5728 React \\u4E2D\\u4F7F\\u7528 Canvas \\u7ED8\\u5236\\u56FE\\u7247\\u5E76\\u6DFB\\u52A0\\u5BF9\\u6BD4\\u8272\\u6587\\u672C\"]}),(0,n.jsx)(a.p,{children:\"\\u5728\\u8FD9\\u7BC7\\u535A\\u5BA2\\u4E2D\\uFF0C\\u6211\\u4EEC\\u5C06\\u5B66\\u4E60\\u5982\\u4F55\\u5728 React \\u4E2D\\u4F7F\\u7528 Canvas \\u7ED8\\u5236\\u56FE\\u7247\\u3001\\u5904\\u7406\\u56FE\\u7247\\u6570\\u636E\\uFF0C\\u5E76\\u6839\\u636E\\u56FE\\u7247\\u7684\\u9876\\u90E8\\u989C\\u8272\\u751F\\u6210\\u5BF9\\u6BD4\\u8272\\uFF0C\\u4EE5\\u4FBF\\u5728\\u56FE\\u7247\\u9876\\u90E8\\u6DFB\\u52A0\\u6E05\\u6670\\u6613\\u8BFB\\u7684\\u6587\\u5B57\\u3002\\u8FD9\\u4E2A\\u9879\\u76EE\\u9002\\u5408\\u5BF9\\u524D\\u7AEF\\u56FE\\u5F62\\u5904\\u7406\\u548C Canvas \\u6709\\u5174\\u8DA3\\u7684\\u5F00\\u53D1\\u8005\\uFF0C\\u7279\\u522B\\u662F\\u90A3\\u4E9B\\u9700\\u8981\\u5728\\u9879\\u76EE\\u4E2D\\u5E94\\u7528\\u56FE\\u50CF\\u5904\\u7406\\u548C\\u6587\\u5B57\\u53E0\\u52A0\\u7684\\u573A\\u666F\\u3002\"}),(0,n.jsxs)(a.h3,{className:\"content-header\",id:\"\\u9700\\u6C42\\u5206\\u6790\",children:[(0,n.jsx)(a.a,{\"aria-hidden\":\"true\",href:\"#\\u9700\\u6C42\\u5206\\u6790\",tabIndex:\"-1\",children:(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(a.span,{className:\"content-header-link\",children:(0,n.jsxs)(a.svg,{className:\"h-5 linkicon w-5\",fill:\"currentColor\",viewBox:\"0 0 20 20\",xmlns:\"http://www.w3.org/2000/svg\",children:[(0,n.jsx)(a.path,{d:\"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z\"}),(0,n.jsx)(a.path,{d:\"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z\"})]})})})}),\"\\u9700\\u6C42\\u5206\\u6790\"]}),(0,n.jsx)(a.p,{children:\"\\u6211\\u4EEC\\u5E0C\\u671B\\u5B9E\\u73B0\\u4EE5\\u4E0B\\u51E0\\u4E2A\\u529F\\u80FD\\uFF1A\"}),(0,n.jsxs)(a.ol,{children:[(0,n.jsxs)(a.li,{children:[(0,n.jsx)(a.strong,{children:\"\\u52A0\\u8F7D\\u548C\\u7ED8\\u5236\\u56FE\\u7247\"}),\"\\uFF1A\\u5728 Canvas \\u4E2D\\u52A0\\u8F7D\\u4E00\\u5F20\\u56FE\\u7247\\u5E76\\u5C06\\u5176\\u7ED8\\u5236\\u51FA\\u6765\\u3002\"]}),(0,n.jsxs)(a.li,{children:[(0,n.jsx)(a.strong,{children:\"\\u83B7\\u53D6\\u56FE\\u7247\\u9876\\u90E8\\u7684\\u5E73\\u5747\\u989C\\u8272\"}),\"\\uFF1A\\u63D0\\u53D6\\u56FE\\u7247\\u9876\\u90E8\\u533A\\u57DF\\u7684\\u989C\\u8272\\u6570\\u636E\\uFF0C\\u8BA1\\u7B97\\u5E73\\u5747\\u989C\\u8272\\u503C\\u3002\"]}),(0,n.jsxs)(a.li,{children:[(0,n.jsx)(a.strong,{children:\"\\u751F\\u6210\\u5BF9\\u6BD4\\u8272\"}),\"\\uFF1A\\u6839\\u636E\\u9876\\u90E8\\u989C\\u8272\\u751F\\u6210\\u4E00\\u4E2A\\u5BF9\\u6BD4\\u8272\\uFF08\\u9ED1\\u8272\\u6216\\u767D\\u8272\\uFF09\\uFF0C\\u4F7F\\u5176\\u4E0E\\u9876\\u90E8\\u989C\\u8272\\u5F62\\u6210\\u660E\\u663E\\u5BF9\\u6BD4\\u3002\"]}),(0,n.jsxs)(a.li,{children:[(0,n.jsx)(a.strong,{children:\"\\u7ED8\\u5236\\u6587\\u5B57\"}),\"\\uFF1A\\u5728\\u56FE\\u7247\\u9876\\u90E8\\u4F7F\\u7528\\u5BF9\\u6BD4\\u8272\\u7ED8\\u5236\\u4E00\\u6BB5\\u6587\\u5B57\\uFF0C\\u4EE5\\u786E\\u4FDD\\u6587\\u5B57\\u6E05\\u6670\\u53EF\\u8BFB\\u3002\"]})]}),(0,n.jsxs)(a.h3,{className:\"content-header\",id:\"\\u6280\\u672F\\u70B9\",children:[(0,n.jsx)(a.a,{\"aria-hidden\":\"true\",href:\"#\\u6280\\u672F\\u70B9\",tabIndex:\"-1\",children:(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(a.span,{className:\"content-header-link\",children:(0,n.jsxs)(a.svg,{className:\"h-5 linkicon w-5\",fill:\"currentColor\",viewBox:\"0 0 20 20\",xmlns:\"http://www.w3.org/2000/svg\",children:[(0,n.jsx)(a.path,{d:\"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z\"}),(0,n.jsx)(a.path,{d:\"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z\"})]})})})}),\"\\u6280\\u672F\\u70B9\"]}),(0,n.jsxs)(a.ul,{children:[(0,n.jsxs)(a.li,{children:[(0,n.jsx)(a.strong,{children:\"Canvas API\"}),\"\\uFF1A\\u7528\\u4E8E\\u56FE\\u50CF\\u7ED8\\u5236\\u548C\\u56FE\\u50CF\\u6570\\u636E\\u5904\\u7406\\u3002\"]}),(0,n.jsxs)(a.li,{children:[(0,n.jsx)(a.strong,{children:\"React Hooks\"}),\"\\uFF1A\\u4F7F\\u7528 \",(0,n.jsx)(a.code,{children:\"useRef\"}),\" \\u548C \",(0,n.jsx)(a.code,{children:\"useEffect\"}),\" \\u7BA1\\u7406 Canvas \\u548C\\u5F02\\u6B65\\u64CD\\u4F5C\\u3002\"]}),(0,n.jsxs)(a.li,{children:[(0,n.jsx)(a.strong,{children:\"\\u5BF9\\u6BD4\\u8272\\u8BA1\\u7B97\"}),\"\\uFF1A\\u901A\\u8FC7\\u4EAE\\u5EA6\\u8BA1\\u7B97\\u6765\\u786E\\u5B9A\\u6587\\u672C\\u7684\\u6700\\u4F73\\u5BF9\\u6BD4\\u8272\\u3002\"]})]}),(0,n.jsxs)(a.h3,{className:\"content-header\",id:\"\\u5B9E\\u73B0\\u6B65\\u9AA4\",children:[(0,n.jsx)(a.a,{\"aria-hidden\":\"true\",href:\"#\\u5B9E\\u73B0\\u6B65\\u9AA4\",tabIndex:\"-1\",children:(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(a.span,{className:\"content-header-link\",children:(0,n.jsxs)(a.svg,{className:\"h-5 linkicon w-5\",fill:\"currentColor\",viewBox:\"0 0 20 20\",xmlns:\"http://www.w3.org/2000/svg\",children:[(0,n.jsx)(a.path,{d:\"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z\"}),(0,n.jsx)(a.path,{d:\"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z\"})]})})})}),\"\\u5B9E\\u73B0\\u6B65\\u9AA4\"]}),(0,n.jsxs)(a.h4,{className:\"content-header\",id:\"1-\\u521B\\u5EFA\\u9879\\u76EE\\u7ED3\\u6784\",children:[(0,n.jsx)(a.a,{\"aria-hidden\":\"true\",href:\"#1-\\u521B\\u5EFA\\u9879\\u76EE\\u7ED3\\u6784\",tabIndex:\"-1\",children:(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(a.span,{className:\"content-header-link\",children:(0,n.jsxs)(a.svg,{className:\"h-5 linkicon w-5\",fill:\"currentColor\",viewBox:\"0 0 20 20\",xmlns:\"http://www.w3.org/2000/svg\",children:[(0,n.jsx)(a.path,{d:\"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z\"}),(0,n.jsx)(a.path,{d:\"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z\"})]})})})}),\"1. \\u521B\\u5EFA\\u9879\\u76EE\\u7ED3\\u6784\"]}),(0,n.jsxs)(a.p,{children:[\"\\u5728 React \\u9879\\u76EE\\u4E2D\\u521B\\u5EFA\\u4E00\\u4E2A\\u65B0\\u7684\\u7EC4\\u4EF6\\u6587\\u4EF6 \",(0,n.jsx)(a.code,{children:\"Page.tsx\"}),\"\\uFF0C\\u5E76\\u5B9A\\u4E49\\u57FA\\u672C\\u7ED3\\u6784\\uFF1A\"]}),(0,n.jsx)(a.pre,{className:\"language-typescript\",children:(0,n.jsxs)(a.code,{className:\"language-typescript code-highlight\",children:[(0,n.jsxs)(a.span,{className:\"code-line\",children:[(0,n.jsx)(a.span,{className:\"token string\",children:'\"use client\"'}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(a.span,{className:\"code-line\",children:[(0,n.jsx)(a.span,{className:\"token keyword\",children:\"import\"}),\" React\",(0,n.jsx)(a.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(a.span,{className:\"token punctuation\",children:\"{\"}),\" useEffect\",(0,n.jsx)(a.span,{className:\"token punctuation\",children:\",\"}),\" useRef \",(0,n.jsx)(a.span,{className:\"token punctuation\",children:\"}\"}),\" \",(0,n.jsx)(a.span,{className:\"token keyword\",children:\"from\"}),\" \",(0,n.jsx)(a.span,{className:\"token string\",children:'\"react\"'}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\";\"}),`\n`]})]})}),(0,n.jsxs)(a.h4,{className:\"content-header\",id:\"2-\\u52A0\\u8F7D\\u56FE\\u7247\\u5E76\\u7ED8\\u5236\\u5230-canvas\",children:[(0,n.jsx)(a.a,{\"aria-hidden\":\"true\",href:\"#2-\\u52A0\\u8F7D\\u56FE\\u7247\\u5E76\\u7ED8\\u5236\\u5230-canvas\",tabIndex:\"-1\",children:(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(a.span,{className:\"content-header-link\",children:(0,n.jsxs)(a.svg,{className:\"h-5 linkicon w-5\",fill:\"currentColor\",viewBox:\"0 0 20 20\",xmlns:\"http://www.w3.org/2000/svg\",children:[(0,n.jsx)(a.path,{d:\"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z\"}),(0,n.jsx)(a.path,{d:\"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z\"})]})})})}),\"2. \\u52A0\\u8F7D\\u56FE\\u7247\\u5E76\\u7ED8\\u5236\\u5230 Canvas\"]}),(0,n.jsxs)(a.p,{children:[\"\\u6211\\u4EEC\\u5148\\u5B9A\\u4E49\\u4E00\\u4E2A \",(0,n.jsx)(a.code,{children:\"loadImage\"}),\" \\u51FD\\u6570\\uFF0C\\u7528\\u4E8E\\u4ECE URL \\u52A0\\u8F7D\\u56FE\\u7247\\u5E76\\u8FD4\\u56DE \",(0,n.jsx)(a.code,{children:\"HTMLImageElement\"}),\"\\u3002\\u5728\\u56FE\\u7247\\u52A0\\u8F7D\\u5B8C\\u6210\\u540E\\uFF0C\\u6211\\u4EEC\\u53EF\\u4EE5\\u4F7F\\u7528 \",(0,n.jsx)(a.code,{children:'canvas.getContext(\"2d\").drawImage()'}),\" \\u5C06\\u56FE\\u7247\\u7ED8\\u5236\\u5230 Canvas \\u4E0A\\uFF1A\"]}),(0,n.jsx)(a.pre,{className:\"language-typescript\",children:(0,n.jsxs)(a.code,{className:\"language-typescript code-highlight\",children:[(0,n.jsxs)(a.span,{className:\"code-line\",children:[(0,n.jsx)(a.span,{className:\"token keyword\",children:\"function\"}),\" \",(0,n.jsx)(a.span,{className:\"token function\",children:\"loadImage\"}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\"(\"}),\"url\",(0,n.jsx)(a.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(a.span,{className:\"token builtin\",children:\"string\"}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(a.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(a.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(a.span,{className:\"token keyword\",children:\"return\"}),\" \",(0,n.jsx)(a.span,{className:\"token keyword\",children:\"new\"}),\" \",(0,n.jsxs)(a.span,{className:\"token class-name\",children:[(0,n.jsx)(a.span,{className:\"token builtin\",children:\"Promise\"}),(0,n.jsx)(a.span,{className:\"token operator\",children:\"<\"}),\"HTMLImageElement\",(0,n.jsx)(a.span,{className:\"token operator\",children:\">\"})]}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\"(\"}),\"resolve\",(0,n.jsx)(a.span,{className:\"token punctuation\",children:\",\"}),\" reject\",(0,n.jsx)(a.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(a.span,{className:\"token operator\",children:\"=>\"}),\" \",(0,n.jsx)(a.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(a.span,{className:\"code-line\",children:[\"        \",(0,n.jsx)(a.span,{className:\"token keyword\",children:\"const\"}),\" img \",(0,n.jsx)(a.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(a.span,{className:\"token keyword\",children:\"new\"}),\" \",(0,n.jsx)(a.span,{className:\"token class-name\",children:\"Image\"}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(a.span,{className:\"code-line\",children:[\"        img\",(0,n.jsx)(a.span,{className:\"token punctuation\",children:\".\"}),\"crossOrigin \",(0,n.jsx)(a.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(a.span,{className:\"token string\",children:'\"anonymous\"'}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(a.span,{className:\"code-line\",children:[\"        img\",(0,n.jsx)(a.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(a.span,{className:\"token function function-variable\",children:\"onload\"}),\" \",(0,n.jsx)(a.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(a.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(a.span,{className:\"token operator\",children:\"=>\"}),\" \",(0,n.jsx)(a.span,{className:\"token function\",children:\"resolve\"}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\"(\"}),\"img\",(0,n.jsx)(a.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(a.span,{className:\"code-line\",children:[\"        img\",(0,n.jsx)(a.span,{className:\"token punctuation\",children:\".\"}),\"onerror \",(0,n.jsx)(a.span,{className:\"token operator\",children:\"=\"}),\" reject\",(0,n.jsx)(a.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(a.span,{className:\"code-line\",children:[\"        img\",(0,n.jsx)(a.span,{className:\"token punctuation\",children:\".\"}),\"src \",(0,n.jsx)(a.span,{className:\"token operator\",children:\"=\"}),\" url\",(0,n.jsx)(a.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(a.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(a.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(a.span,{className:\"code-line\",children:[(0,n.jsx)(a.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),(0,n.jsxs)(a.h4,{className:\"content-header\",id:\"3-\\u83B7\\u53D6\\u56FE\\u7247\\u9876\\u90E8\\u7684\\u5E73\\u5747\\u989C\\u8272\",children:[(0,n.jsx)(a.a,{\"aria-hidden\":\"true\",href:\"#3-\\u83B7\\u53D6\\u56FE\\u7247\\u9876\\u90E8\\u7684\\u5E73\\u5747\\u989C\\u8272\",tabIndex:\"-1\",children:(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(a.span,{className:\"content-header-link\",children:(0,n.jsxs)(a.svg,{className:\"h-5 linkicon w-5\",fill:\"currentColor\",viewBox:\"0 0 20 20\",xmlns:\"http://www.w3.org/2000/svg\",children:[(0,n.jsx)(a.path,{d:\"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z\"}),(0,n.jsx)(a.path,{d:\"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z\"})]})})})}),\"3. \\u83B7\\u53D6\\u56FE\\u7247\\u9876\\u90E8\\u7684\\u5E73\\u5747\\u989C\\u8272\"]}),(0,n.jsx)(a.p,{children:\"\\u63A5\\u4E0B\\u6765\\uFF0C\\u6211\\u4EEC\\u63D0\\u53D6\\u56FE\\u7247\\u9876\\u90E8\\u7684\\u989C\\u8272\\u6570\\u636E\\uFF0C\\u5E76\\u8BA1\\u7B97\\u5176\\u5E73\\u5747\\u989C\\u8272\\u3002\\u6211\\u4EEC\\u53EF\\u4EE5\\u53D6\\u56FE\\u7247\\u9876\\u90E8 10% \\u7684\\u9AD8\\u5EA6\\u4F5C\\u4E3A\\u6837\\u672C\\u533A\\u57DF\\uFF1A\"}),(0,n.jsx)(a.pre,{className:\"language-typescript\",children:(0,n.jsxs)(a.code,{className:\"language-typescript code-highlight\",children:[(0,n.jsxs)(a.span,{className:\"code-line\",children:[(0,n.jsx)(a.span,{className:\"token keyword\",children:\"function\"}),\" \",(0,n.jsx)(a.span,{className:\"token function\",children:\"getTopColor\"}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\"(\"}),\"imageData\",(0,n.jsx)(a.span,{className:\"token operator\",children:\":\"}),\" ImageData\",(0,n.jsx)(a.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(a.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(a.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(a.span,{className:\"token keyword\",children:\"const\"}),\" \",(0,n.jsx)(a.span,{className:\"token punctuation\",children:\"{\"}),\" data\",(0,n.jsx)(a.span,{className:\"token punctuation\",children:\",\"}),\" width\",(0,n.jsx)(a.span,{className:\"token punctuation\",children:\",\"}),\" height \",(0,n.jsx)(a.span,{className:\"token punctuation\",children:\"}\"}),\" \",(0,n.jsx)(a.span,{className:\"token operator\",children:\"=\"}),\" imageData\",(0,n.jsx)(a.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(a.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(a.span,{className:\"token keyword\",children:\"const\"}),\" topHeight \",(0,n.jsx)(a.span,{className:\"token operator\",children:\"=\"}),\" Math\",(0,n.jsx)(a.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(a.span,{className:\"token function\",children:\"floor\"}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\"(\"}),\"height \",(0,n.jsx)(a.span,{className:\"token operator\",children:\"*\"}),\" \",(0,n.jsx)(a.span,{className:\"token number\",children:\"0.1\"}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsx)(a.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(a.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(a.span,{className:\"token keyword\",children:\"let\"}),\" rTotal \",(0,n.jsx)(a.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(a.span,{className:\"token number\",children:\"0\"}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\",\"}),\" gTotal \",(0,n.jsx)(a.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(a.span,{className:\"token number\",children:\"0\"}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\",\"}),\" bTotal \",(0,n.jsx)(a.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(a.span,{className:\"token number\",children:\"0\"}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\",\"}),\" pixelCount \",(0,n.jsx)(a.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(a.span,{className:\"token number\",children:\"0\"}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsx)(a.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(a.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(a.span,{className:\"token keyword\",children:\"for\"}),\" \",(0,n.jsx)(a.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(a.span,{className:\"token keyword\",children:\"let\"}),\" y \",(0,n.jsx)(a.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(a.span,{className:\"token number\",children:\"0\"}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\";\"}),\" y \",(0,n.jsx)(a.span,{className:\"token operator\",children:\"<\"}),\" topHeight\",(0,n.jsx)(a.span,{className:\"token punctuation\",children:\";\"}),\" y\",(0,n.jsx)(a.span,{className:\"token operator\",children:\"++\"}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(a.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(a.span,{className:\"code-line\",children:[\"        \",(0,n.jsx)(a.span,{className:\"token keyword\",children:\"for\"}),\" \",(0,n.jsx)(a.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(a.span,{className:\"token keyword\",children:\"let\"}),\" x \",(0,n.jsx)(a.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(a.span,{className:\"token number\",children:\"0\"}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\";\"}),\" x \",(0,n.jsx)(a.span,{className:\"token operator\",children:\"<\"}),\" width\",(0,n.jsx)(a.span,{className:\"token punctuation\",children:\";\"}),\" x\",(0,n.jsx)(a.span,{className:\"token operator\",children:\"++\"}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(a.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(a.span,{className:\"code-line\",children:[\"            \",(0,n.jsx)(a.span,{className:\"token keyword\",children:\"const\"}),\" index \",(0,n.jsx)(a.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(a.span,{className:\"token punctuation\",children:\"(\"}),\"y \",(0,n.jsx)(a.span,{className:\"token operator\",children:\"*\"}),\" width \",(0,n.jsx)(a.span,{className:\"token operator\",children:\"+\"}),\" x\",(0,n.jsx)(a.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(a.span,{className:\"token operator\",children:\"*\"}),\" \",(0,n.jsx)(a.span,{className:\"token number\",children:\"4\"}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(a.span,{className:\"code-line\",children:[\"            rTotal \",(0,n.jsx)(a.span,{className:\"token operator\",children:\"+=\"}),\" data\",(0,n.jsx)(a.span,{className:\"token punctuation\",children:\"[\"}),\"index\",(0,n.jsx)(a.span,{className:\"token punctuation\",children:\"]\"}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(a.span,{className:\"code-line\",children:[\"            gTotal \",(0,n.jsx)(a.span,{className:\"token operator\",children:\"+=\"}),\" data\",(0,n.jsx)(a.span,{className:\"token punctuation\",children:\"[\"}),\"index \",(0,n.jsx)(a.span,{className:\"token operator\",children:\"+\"}),\" \",(0,n.jsx)(a.span,{className:\"token number\",children:\"1\"}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\"]\"}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(a.span,{className:\"code-line\",children:[\"            bTotal \",(0,n.jsx)(a.span,{className:\"token operator\",children:\"+=\"}),\" data\",(0,n.jsx)(a.span,{className:\"token punctuation\",children:\"[\"}),\"index \",(0,n.jsx)(a.span,{className:\"token operator\",children:\"+\"}),\" \",(0,n.jsx)(a.span,{className:\"token number\",children:\"2\"}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\"]\"}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(a.span,{className:\"code-line\",children:[\"            pixelCount\",(0,n.jsx)(a.span,{className:\"token operator\",children:\"++\"}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(a.span,{className:\"code-line\",children:[\"        \",(0,n.jsx)(a.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,n.jsxs)(a.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(a.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,n.jsx)(a.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(a.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(a.span,{className:\"token keyword\",children:\"const\"}),\" rAvg \",(0,n.jsx)(a.span,{className:\"token operator\",children:\"=\"}),\" rTotal \",(0,n.jsx)(a.span,{className:\"token operator\",children:\"/\"}),\" pixelCount\",(0,n.jsx)(a.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(a.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(a.span,{className:\"token keyword\",children:\"const\"}),\" gAvg \",(0,n.jsx)(a.span,{className:\"token operator\",children:\"=\"}),\" gTotal \",(0,n.jsx)(a.span,{className:\"token operator\",children:\"/\"}),\" pixelCount\",(0,n.jsx)(a.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(a.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(a.span,{className:\"token keyword\",children:\"const\"}),\" bAvg \",(0,n.jsx)(a.span,{className:\"token operator\",children:\"=\"}),\" bTotal \",(0,n.jsx)(a.span,{className:\"token operator\",children:\"/\"}),\" pixelCount\",(0,n.jsx)(a.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsx)(a.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(a.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(a.span,{className:\"token keyword\",children:\"return\"}),\" \",(0,n.jsx)(a.span,{className:\"token punctuation\",children:\"{\"}),\" r\",(0,n.jsx)(a.span,{className:\"token operator\",children:\":\"}),\" Math\",(0,n.jsx)(a.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(a.span,{className:\"token function\",children:\"round\"}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\"(\"}),\"rAvg\",(0,n.jsx)(a.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\",\"}),\" g\",(0,n.jsx)(a.span,{className:\"token operator\",children:\":\"}),\" Math\",(0,n.jsx)(a.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(a.span,{className:\"token function\",children:\"round\"}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\"(\"}),\"gAvg\",(0,n.jsx)(a.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\",\"}),\" b\",(0,n.jsx)(a.span,{className:\"token operator\",children:\":\"}),\" Math\",(0,n.jsx)(a.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(a.span,{className:\"token function\",children:\"round\"}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\"(\"}),\"bAvg\",(0,n.jsx)(a.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(a.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(a.span,{className:\"code-line\",children:[(0,n.jsx)(a.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),(0,n.jsxs)(a.h4,{className:\"content-header\",id:\"4-\\u6839\\u636E\\u9876\\u90E8\\u989C\\u8272\\u751F\\u6210\\u5BF9\\u6BD4\\u8272\",children:[(0,n.jsx)(a.a,{\"aria-hidden\":\"true\",href:\"#4-\\u6839\\u636E\\u9876\\u90E8\\u989C\\u8272\\u751F\\u6210\\u5BF9\\u6BD4\\u8272\",tabIndex:\"-1\",children:(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(a.span,{className:\"content-header-link\",children:(0,n.jsxs)(a.svg,{className:\"h-5 linkicon w-5\",fill:\"currentColor\",viewBox:\"0 0 20 20\",xmlns:\"http://www.w3.org/2000/svg\",children:[(0,n.jsx)(a.path,{d:\"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z\"}),(0,n.jsx)(a.path,{d:\"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z\"})]})})})}),\"4. \\u6839\\u636E\\u9876\\u90E8\\u989C\\u8272\\u751F\\u6210\\u5BF9\\u6BD4\\u8272\"]}),(0,n.jsx)(a.p,{children:\"\\u4E3A\\u4E86\\u786E\\u4FDD\\u6587\\u5B57\\u5728\\u56FE\\u7247\\u4E0A\\u5177\\u6709\\u6E05\\u6670\\u7684\\u5BF9\\u6BD4\\u5EA6\\uFF0C\\u6211\\u4EEC\\u53EF\\u4EE5\\u6839\\u636E\\u9876\\u90E8\\u989C\\u8272\\u7684\\u4EAE\\u5EA6\\u6765\\u9009\\u62E9\\u5BF9\\u6BD4\\u8272\\u3002\\u4EAE\\u5EA6\\u516C\\u5F0F\\u5982\\u4E0B\\uFF1A\"}),(0,n.jsxs)(a.p,{children:[\"[ \\\\text\",\\u4EAE\\u5EA6,\" = 0.299 \\\\times R + 0.587 \\\\times G + 0.114 \\\\times B ]\"]}),(0,n.jsx)(a.p,{children:\"\\u5982\\u679C\\u4EAE\\u5EA6\\u8F83\\u9AD8\\uFF0C\\u5219\\u4F7F\\u7528\\u9ED1\\u8272\\u4F5C\\u4E3A\\u5BF9\\u6BD4\\u8272\\uFF1B\\u5982\\u679C\\u4EAE\\u5EA6\\u8F83\\u4F4E\\uFF0C\\u5219\\u4F7F\\u7528\\u767D\\u8272\\u3002\\u4EE3\\u7801\\u5982\\u4E0B\\uFF1A\"}),(0,n.jsx)(a.pre,{className:\"language-typescript\",children:(0,n.jsxs)(a.code,{className:\"language-typescript code-highlight\",children:[(0,n.jsxs)(a.span,{className:\"code-line\",children:[(0,n.jsx)(a.span,{className:\"token keyword\",children:\"function\"}),\" \",(0,n.jsx)(a.span,{className:\"token function\",children:\"getContrastColor\"}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\"{\"}),\" r\",(0,n.jsx)(a.span,{className:\"token punctuation\",children:\",\"}),\" g\",(0,n.jsx)(a.span,{className:\"token punctuation\",children:\",\"}),\" b \",(0,n.jsx)(a.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(a.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(a.span,{className:\"token punctuation\",children:\"{\"}),\" r\",(0,n.jsx)(a.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(a.span,{className:\"token builtin\",children:\"number\"}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\";\"}),\" g\",(0,n.jsx)(a.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(a.span,{className:\"token builtin\",children:\"number\"}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\";\"}),\" b\",(0,n.jsx)(a.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(a.span,{className:\"token builtin\",children:\"number\"}),\" \",(0,n.jsx)(a.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(a.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(a.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(a.span,{className:\"token keyword\",children:\"const\"}),\" brightness \",(0,n.jsx)(a.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(a.span,{className:\"token number\",children:\"0.299\"}),\" \",(0,n.jsx)(a.span,{className:\"token operator\",children:\"*\"}),\" r \",(0,n.jsx)(a.span,{className:\"token operator\",children:\"+\"}),\" \",(0,n.jsx)(a.span,{className:\"token number\",children:\"0.587\"}),\" \",(0,n.jsx)(a.span,{className:\"token operator\",children:\"*\"}),\" g \",(0,n.jsx)(a.span,{className:\"token operator\",children:\"+\"}),\" \",(0,n.jsx)(a.span,{className:\"token number\",children:\"0.114\"}),\" \",(0,n.jsx)(a.span,{className:\"token operator\",children:\"*\"}),\" b\",(0,n.jsx)(a.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(a.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(a.span,{className:\"token keyword\",children:\"return\"}),\" brightness \",(0,n.jsx)(a.span,{className:\"token operator\",children:\">\"}),\" \",(0,n.jsx)(a.span,{className:\"token number\",children:\"128\"}),\" \",(0,n.jsx)(a.span,{className:\"token operator\",children:\"?\"}),\" \",(0,n.jsx)(a.span,{className:\"token string\",children:\"'black'\"}),\" \",(0,n.jsx)(a.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(a.span,{className:\"token string\",children:\"'white'\"}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(a.span,{className:\"code-line\",children:[(0,n.jsx)(a.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),(0,n.jsxs)(a.h4,{className:\"content-header\",id:\"5-\\u4F7F\\u7528\\u5BF9\\u6BD4\\u8272\\u7ED8\\u5236\\u6587\\u672C\",children:[(0,n.jsx)(a.a,{\"aria-hidden\":\"true\",href:\"#5-\\u4F7F\\u7528\\u5BF9\\u6BD4\\u8272\\u7ED8\\u5236\\u6587\\u672C\",tabIndex:\"-1\",children:(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(a.span,{className:\"content-header-link\",children:(0,n.jsxs)(a.svg,{className:\"h-5 linkicon w-5\",fill:\"currentColor\",viewBox:\"0 0 20 20\",xmlns:\"http://www.w3.org/2000/svg\",children:[(0,n.jsx)(a.path,{d:\"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z\"}),(0,n.jsx)(a.path,{d:\"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z\"})]})})})}),\"5. \\u4F7F\\u7528\\u5BF9\\u6BD4\\u8272\\u7ED8\\u5236\\u6587\\u672C\"]}),(0,n.jsx)(a.p,{children:\"\\u73B0\\u5728\\u6211\\u4EEC\\u53EF\\u4EE5\\u5C06\\u6587\\u5B57\\u7ED8\\u5236\\u5230 Canvas \\u7684\\u9876\\u90E8\\u533A\\u57DF\\uFF0C\\u5E76\\u4F7F\\u7528\\u5BF9\\u6BD4\\u8272\\u786E\\u4FDD\\u6587\\u5B57\\u6E05\\u6670\\u53EF\\u89C1\\u3002\"}),(0,n.jsx)(a.pre,{className:\"language-typescript\",children:(0,n.jsxs)(a.code,{className:\"language-typescript code-highlight\",children:[(0,n.jsxs)(a.span,{className:\"code-line\",children:[(0,n.jsx)(a.span,{className:\"token keyword\",children:\"export\"}),\" \",(0,n.jsx)(a.span,{className:\"token keyword\",children:\"default\"}),\" \",(0,n.jsx)(a.span,{className:\"token keyword\",children:\"function\"}),\" \",(0,n.jsx)(a.span,{className:\"token function\",children:\"Page\"}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(a.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(a.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(a.span,{className:\"token keyword\",children:\"const\"}),\" canvasRef \",(0,n.jsx)(a.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsxs)(a.span,{className:\"token generic-function\",children:[(0,n.jsx)(a.span,{className:\"token function\",children:\"useRef\"}),(0,n.jsxs)(a.span,{className:\"token class-name generic\",children:[(0,n.jsx)(a.span,{className:\"token operator\",children:\"<\"}),\"HTMLCanvasElement\",(0,n.jsx)(a.span,{className:\"token operator\",children:\">\"})]})]}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(a.span,{className:\"token keyword\",children:\"null\"}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsx)(a.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(a.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(a.span,{className:\"token function\",children:\"useEffect\"}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(a.span,{className:\"token operator\",children:\"=>\"}),\" \",(0,n.jsx)(a.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(a.span,{className:\"code-line\",children:[\"        \",(0,n.jsx)(a.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(a.span,{className:\"token keyword\",children:\"async\"}),\" \",(0,n.jsx)(a.span,{className:\"token keyword\",children:\"function\"}),\" \",(0,n.jsx)(a.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(a.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(a.span,{className:\"code-line\",children:[\"            \",(0,n.jsx)(a.span,{className:\"token keyword\",children:\"const\"}),\" canvas \",(0,n.jsx)(a.span,{className:\"token operator\",children:\"=\"}),\" canvasRef\",(0,n.jsx)(a.span,{className:\"token punctuation\",children:\".\"}),\"current\",(0,n.jsx)(a.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(a.span,{className:\"code-line\",children:[\"            \",(0,n.jsx)(a.span,{className:\"token keyword\",children:\"if\"}),\" \",(0,n.jsx)(a.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(a.span,{className:\"token operator\",children:\"!\"}),\"canvas\",(0,n.jsx)(a.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(a.span,{className:\"token keyword\",children:\"return\"}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsx)(a.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(a.span,{className:\"code-line\",children:[\"            \",(0,n.jsx)(a.span,{className:\"token keyword\",children:\"const\"}),\" context \",(0,n.jsx)(a.span,{className:\"token operator\",children:\"=\"}),\" canvas\",(0,n.jsx)(a.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(a.span,{className:\"token function\",children:\"getContext\"}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(a.span,{className:\"token string\",children:'\"2d\"'}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(a.span,{className:\"code-line\",children:[\"            \",(0,n.jsx)(a.span,{className:\"token keyword\",children:\"const\"}),\" img \",(0,n.jsx)(a.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(a.span,{className:\"token keyword\",children:\"await\"}),\" \",(0,n.jsx)(a.span,{className:\"token function\",children:\"loadImage\"}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(a.span,{className:\"token string\",children:'\"https://plus.unsplash.com/premium_photo-1664474619075-644dd191935f?w=800&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MXx8aW1hZ2V8ZW58MHx8MHx8fDA%3D\"'}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsx)(a.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(a.span,{className:\"code-line\",children:[\"            canvas\",(0,n.jsx)(a.span,{className:\"token punctuation\",children:\".\"}),\"width \",(0,n.jsx)(a.span,{className:\"token operator\",children:\"=\"}),\" img\",(0,n.jsx)(a.span,{className:\"token punctuation\",children:\".\"}),\"width\",(0,n.jsx)(a.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(a.span,{className:\"code-line\",children:[\"            canvas\",(0,n.jsx)(a.span,{className:\"token punctuation\",children:\".\"}),\"height \",(0,n.jsx)(a.span,{className:\"token operator\",children:\"=\"}),\" img\",(0,n.jsx)(a.span,{className:\"token punctuation\",children:\".\"}),\"height\",(0,n.jsx)(a.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsx)(a.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(a.span,{className:\"code-line\",children:[\"            \",(0,n.jsx)(a.span,{className:\"token keyword\",children:\"const\"}),\" imageData \",(0,n.jsx)(a.span,{className:\"token operator\",children:\"=\"}),\" context\",(0,n.jsx)(a.span,{className:\"token operator\",children:\"?.\"}),(0,n.jsx)(a.span,{className:\"token function\",children:\"getImageData\"}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(a.span,{className:\"token number\",children:\"0\"}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(a.span,{className:\"token number\",children:\"0\"}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\",\"}),\" img\",(0,n.jsx)(a.span,{className:\"token punctuation\",children:\".\"}),\"width\",(0,n.jsx)(a.span,{className:\"token punctuation\",children:\",\"}),\" img\",(0,n.jsx)(a.span,{className:\"token punctuation\",children:\".\"}),\"height\",(0,n.jsx)(a.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(a.span,{className:\"code-line\",children:[\"            \",(0,n.jsx)(a.span,{className:\"token keyword\",children:\"if\"}),\" \",(0,n.jsx)(a.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(a.span,{className:\"token operator\",children:\"!\"}),\"imageData\",(0,n.jsx)(a.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(a.span,{className:\"token keyword\",children:\"return\"}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsx)(a.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(a.span,{className:\"code-line\",children:[\"            \",(0,n.jsx)(a.span,{className:\"token keyword\",children:\"const\"}),\" topColor \",(0,n.jsx)(a.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(a.span,{className:\"token function\",children:\"getTopColor\"}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\"(\"}),\"imageData\",(0,n.jsx)(a.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(a.span,{className:\"code-line\",children:[\"            \",(0,n.jsx)(a.span,{className:\"token keyword\",children:\"const\"}),\" contrastColor \",(0,n.jsx)(a.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(a.span,{className:\"token function\",children:\"getContrastColor\"}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\"(\"}),\"topColor\",(0,n.jsx)(a.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsx)(a.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(a.span,{className:\"code-line\",children:[\"            context\",(0,n.jsx)(a.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(a.span,{className:\"token function\",children:\"putImageData\"}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\"(\"}),\"imageData\",(0,n.jsx)(a.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(a.span,{className:\"token number\",children:\"0\"}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(a.span,{className:\"token number\",children:\"0\"}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsx)(a.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(a.span,{className:\"code-line\",children:[\"            \",(0,n.jsx)(a.span,{className:\"token comment\",children:\"// \\u8BBE\\u7F6E\\u6587\\u672C\\u6837\\u5F0F\\u5E76\\u7ED8\\u5236\\u5230\\u9876\\u90E8\"}),`\n`]}),(0,n.jsxs)(a.span,{className:\"code-line\",children:[\"            context\",(0,n.jsx)(a.span,{className:\"token punctuation\",children:\".\"}),\"font \",(0,n.jsx)(a.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(a.span,{className:\"token string\",children:'\"24px Arial\"'}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(a.span,{className:\"code-line\",children:[\"            context\",(0,n.jsx)(a.span,{className:\"token punctuation\",children:\".\"}),\"fillStyle \",(0,n.jsx)(a.span,{className:\"token operator\",children:\"=\"}),\" contrastColor\",(0,n.jsx)(a.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(a.span,{className:\"code-line\",children:[\"            context\",(0,n.jsx)(a.span,{className:\"token punctuation\",children:\".\"}),\"textAlign \",(0,n.jsx)(a.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(a.span,{className:\"token string\",children:'\"center\"'}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(a.span,{className:\"code-line\",children:[\"            context\",(0,n.jsx)(a.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(a.span,{className:\"token function\",children:\"fillText\"}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(a.span,{className:\"token string\",children:'\"Sample Text at Top\"'}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\",\"}),\" canvas\",(0,n.jsx)(a.span,{className:\"token punctuation\",children:\".\"}),\"width \",(0,n.jsx)(a.span,{className:\"token operator\",children:\"/\"}),\" \",(0,n.jsx)(a.span,{className:\"token number\",children:\"2\"}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(a.span,{className:\"token number\",children:\"30\"}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(a.span,{className:\"code-line\",children:[\"        \",(0,n.jsx)(a.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(a.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(a.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(a.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\"]\"}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsx)(a.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(a.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(a.span,{className:\"token keyword\",children:\"return\"}),\" \",(0,n.jsx)(a.span,{className:\"token punctuation\",children:\"(\"}),`\n`]}),(0,n.jsxs)(a.span,{className:\"code-line\",children:[\"        \",(0,n.jsx)(a.span,{className:\"token operator\",children:\"<\"}),\"div\",(0,n.jsx)(a.span,{className:\"token operator\",children:\">\"}),`\n`]}),(0,n.jsxs)(a.span,{className:\"code-line\",children:[\"            \",(0,n.jsx)(a.span,{className:\"token operator\",children:\"<\"}),\"canvas id\",(0,n.jsx)(a.span,{className:\"token operator\",children:\"=\"}),(0,n.jsx)(a.span,{className:\"token string\",children:'\"canvas\"'}),\" ref\",(0,n.jsx)(a.span,{className:\"token operator\",children:\"=\"}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\"{\"}),\"canvasRef\",(0,n.jsx)(a.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(a.span,{className:\"token operator\",children:\">\"}),(0,n.jsx)(a.span,{className:\"token operator\",children:\"<\"}),(0,n.jsx)(a.span,{className:\"token operator\",children:\"/\"}),\"canvas\",(0,n.jsx)(a.span,{className:\"token operator\",children:\">\"}),`\n`]}),(0,n.jsxs)(a.span,{className:\"code-line\",children:[\"        \",(0,n.jsx)(a.span,{className:\"token operator\",children:\"<\"}),(0,n.jsx)(a.span,{className:\"token operator\",children:\"/\"}),\"div\",(0,n.jsx)(a.span,{className:\"token operator\",children:\">\"}),`\n`]}),(0,n.jsxs)(a.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(a.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(a.span,{className:\"code-line\",children:[(0,n.jsx)(a.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),(0,n.jsxs)(a.h3,{className:\"content-header\",id:\"6-\\u6574\\u4F53\\u6548\\u679C\\u5C55\\u793A\",children:[(0,n.jsx)(a.a,{\"aria-hidden\":\"true\",href:\"#6-\\u6574\\u4F53\\u6548\\u679C\\u5C55\\u793A\",tabIndex:\"-1\",children:(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(a.span,{className:\"content-header-link\",children:(0,n.jsxs)(a.svg,{className:\"h-5 linkicon w-5\",fill:\"currentColor\",viewBox:\"0 0 20 20\",xmlns:\"http://www.w3.org/2000/svg\",children:[(0,n.jsx)(a.path,{d:\"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z\"}),(0,n.jsx)(a.path,{d:\"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z\"})]})})})}),\"6. \\u6574\\u4F53\\u6548\\u679C\\u5C55\\u793A\"]}),(0,n.jsx)(a.p,{children:\"\\u5728\\u4EE5\\u4E0A\\u4EE3\\u7801\\u4E2D\\uFF0C\\u6211\\u4EEC\\u5DF2\\u7ECF\\u5C06\\u56FE\\u7247\\u7ED8\\u5236\\u5230 Canvas\\uFF0C\\u5E76\\u5728\\u56FE\\u7247\\u9876\\u90E8\\u6DFB\\u52A0\\u4E86\\u4E00\\u6BB5\\u5E26\\u6709\\u5BF9\\u6BD4\\u8272\\u7684\\u6587\\u5B57\\u3002\"}),(0,n.jsx)(a.p,{children:(0,n.jsx)(a.img,{alt:\"image.png\",src:\"https://p0-xtjj-private.juejin.cn/tos-cn-i-73owjymdk6/04f3dbca16604743851f746364d2ad1e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgcHp6eg==:q75.awebp?policy=eyJ2bSI6MywidWlkIjoiMTM4MDY0MjMzNjAyNjgxMyJ9&rk3s=f64ab15b&x-orig-authkey=f32326d3454f2ac7e96d3d06cdbb035152127018&x-orig-expires=1734227728&x-orig-sign=9kaHDN838ZNoC4m8ZMsnsiRj8mI%3D\"})}),(0,n.jsx)(a.p,{children:(0,n.jsx)(a.img,{alt:\"image.png\",src:\"https://p0-xtjj-private.juejin.cn/tos-cn-i-73owjymdk6/1a302f1a77304c6e93b317e31a2c2b2d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgcHp6eg==:q75.awebp?policy=eyJ2bSI6MywidWlkIjoiMTM4MDY0MjMzNjAyNjgxMyJ9&rk3s=f64ab15b&x-orig-authkey=f32326d3454f2ac7e96d3d06cdbb035152127018&x-orig-expires=1734227728&x-orig-sign=8NuyTjfJMUAS%2FYCNDzBAGMG4%2Frw%3D\"})}),(0,n.jsxs)(a.h3,{className:\"content-header\",id:\"\\u603B\\u7ED3\",children:[(0,n.jsx)(a.a,{\"aria-hidden\":\"true\",href:\"#\\u603B\\u7ED3\",tabIndex:\"-1\",children:(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(a.span,{className:\"content-header-link\",children:(0,n.jsxs)(a.svg,{className:\"h-5 linkicon w-5\",fill:\"currentColor\",viewBox:\"0 0 20 20\",xmlns:\"http://www.w3.org/2000/svg\",children:[(0,n.jsx)(a.path,{d:\"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z\"}),(0,n.jsx)(a.path,{d:\"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z\"})]})})})}),\"\\u603B\\u7ED3\"]}),(0,n.jsx)(a.p,{children:\"\\u5728\\u8FD9\\u7BC7\\u535A\\u5BA2\\u4E2D\\uFF0C\\u6211\\u4EEC\\u5C55\\u793A\\u4E86\\u5982\\u4F55\\u5728 React \\u4E2D\\u4F7F\\u7528 Canvas \\u6765\\u52A0\\u8F7D\\u548C\\u5904\\u7406\\u56FE\\u50CF\\uFF0C\\u5E76\\u6839\\u636E\\u56FE\\u50CF\\u9876\\u90E8\\u989C\\u8272\\u751F\\u6210\\u5BF9\\u6BD4\\u8272\\u7528\\u4E8E\\u6587\\u672C\\u663E\\u793A\\u3002\\u901A\\u8FC7\\u8FD9\\u79CD\\u65B9\\u5F0F\\uFF0C\\u6211\\u4EEC\\u53EF\\u4EE5\\u5728\\u56FE\\u7247\\u4E0A\\u751F\\u6210\\u6E05\\u6670\\u7684\\u6587\\u5B57\\u6548\\u679C\\uFF0C\\u4F7F\\u6587\\u5B57\\u4E0E\\u80CC\\u666F\\u5F62\\u6210\\u826F\\u597D\\u5BF9\\u6BD4\\u3002\\u8FD9\\u79CD\\u6280\\u672F\\u9002\\u7528\\u4E8E\\u5404\\u79CD\\u56FE\\u50CF\\u53E0\\u52A0\\u5E94\\u7528\\u573A\\u666F\\uFF0C\\u5C24\\u5176\\u662F\\u5728\\u521B\\u5EFA\\u6C34\\u5370\\u6216\\u63D0\\u793A\\u6587\\u5B57\\u65F6\\u3002\"}),(0,n.jsxs)(a.p,{children:[\"\\u901A\\u8FC7\\u4F7F\\u7528 Canvas \\u7684 \",(0,n.jsx)(a.code,{children:\"getImageData\"}),\" \\u548C \",(0,n.jsx)(a.code,{children:\"putImageData\"}),\"\\uFF0C\\u6211\\u4EEC\\u4E0D\\u4EC5\\u80FD\\u591F\\u5904\\u7406\\u56FE\\u50CF\\u7684\\u989C\\u8272\\u548C\\u4EAE\\u5EA6\\uFF0C\\u8FD8\\u53EF\\u4EE5\\u5B9E\\u73B0\\u66F4\\u4E30\\u5BCC\\u7684\\u56FE\\u50CF\\u5904\\u7406\\u6548\\u679C\\u3002\\u8FD9\\u79CD\\u65B9\\u6CD5\\u4E3A\\u524D\\u7AEF\\u56FE\\u50CF\\u5904\\u7406\\u63D0\\u4F9B\\u4E86\\u4E00\\u4E2A\\u5F3A\\u5927\\u7684\\u5DE5\\u5177\\uFF0C\\u8BA9\\u6211\\u4EEC\\u80FD\\u591F\\u5728\\u5E94\\u7528\\u4E2D\\u5448\\u73B0\\u66F4\\u591A\\u7684\\u89C6\\u89C9\\u6548\\u679C\\u3002\"]})]})}function d(e={}){let{wrapper:a}=e.components||{};return a?(0,n.jsx)(a,{...e,children:(0,n.jsx)(p,{...e})}):p(e)}return x(y);})();\n;return Component;"
  },
  "_id": "articles/使用 Canvas 绘制图片并添加对比色文本.mdx",
  "_raw": {
    "sourceFilePath": "articles/使用 Canvas 绘制图片并添加对比色文本.mdx",
    "sourceFileName": "使用 Canvas 绘制图片并添加对比色文本.mdx",
    "sourceFileDir": "articles",
    "contentType": "mdx",
    "flattenedPath": "articles/使用 Canvas 绘制图片并添加对比色文本"
  },
  "type": "Blog",
  "readingTime": {
    "text": "6 min read",
    "minutes": 5.76,
    "time": 345600,
    "words": 1152
  },
  "slug": "使用 Canvas 绘制图片并添加对比色文本",
  "path": "articles/使用 Canvas 绘制图片并添加对比色文本",
  "filePath": "articles/使用 Canvas 绘制图片并添加对比色文本.mdx",
  "toc": [
    {
      "value": "在 React 中使用 Canvas 绘制图片并添加对比色文本",
      "url": "#在-react-中使用-canvas-绘制图片并添加对比色文本",
      "depth": 3
    },
    {
      "value": "需求分析",
      "url": "#需求分析",
      "depth": 3
    },
    {
      "value": "技术点",
      "url": "#技术点",
      "depth": 3
    },
    {
      "value": "实现步骤",
      "url": "#实现步骤",
      "depth": 3
    },
    {
      "value": "1. 创建项目结构",
      "url": "#1-创建项目结构",
      "depth": 4
    },
    {
      "value": "2. 加载图片并绘制到 Canvas",
      "url": "#2-加载图片并绘制到-canvas",
      "depth": 4
    },
    {
      "value": "3. 获取图片顶部的平均颜色",
      "url": "#3-获取图片顶部的平均颜色",
      "depth": 4
    },
    {
      "value": "4. 根据顶部颜色生成对比色",
      "url": "#4-根据顶部颜色生成对比色",
      "depth": 4
    },
    {
      "value": "5. 使用对比色绘制文本",
      "url": "#5-使用对比色绘制文本",
      "depth": 4
    },
    {
      "value": "6. 整体效果展示",
      "url": "#6-整体效果展示",
      "depth": 3
    },
    {
      "value": "总结",
      "url": "#总结",
      "depth": 3
    }
  ],
  "structuredData": {
    "@context": "https://schema.org",
    "@type": "BlogPosting",
    "headline": "使用 Canvas 绘制图片并添加对比色文本",
    "datePublished": "2016-03-08T00:00:00.000Z",
    "dateModified": "2016-03-08T00:00:00.000Z",
    "description": "Example of a markdown file with code blocks and syntax highlighting",
    "image": "/static/images/twitter-card.png",
    "url": "https://tailwind-nextjs-starter-blog.vercel.app/articles/使用 Canvas 绘制图片并添加对比色文本"
  }
}